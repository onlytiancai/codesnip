### 最小二乘法公式与图形解释

#### 1. 数学原理
最小二乘法是一种用于拟合线性模型的方法，其核心思想是**最小化观测值与模型预测值之间的误差平方和(SSE)**。

#### 2. 代码中的关键公式

**(1) 设计矩阵构造**
```python
X = np.column_stack([np.ones(n), area, distance])
```
构造了包含截距项（全1向量）、面积和距离特征的设计矩阵。对于第i个样本，设计矩阵的第i行表示为：
$$X_i = [1, \text{area}_i, \text{distance}_i]$$

**(2) 最小二乘解**
```python
beta_hat = np.linalg.inv(X.T @ X) @ X.T @ price
```
这是最小二乘法的核心公式，表示为：
$$\hat{\beta} = (X^T X)^{-1} X^T y$$
其中：
- $X^T$ 是设计矩阵的转置
- $(X^T X)^{-1}$ 是X转置与X乘积的逆矩阵
- $y$ 是观测值向量（房价）
- $\hat{\beta}$ 是估计的模型参数向量

**(3) 误差平方和函数**
```python
def sse(beta0, beta1):
    beta = np.array([beta0, beta1, beta_hat[2]])
    y_hat = X @ beta
    return np.sum((price - y_hat) ** 2)
```
计算给定参数下的误差平方和：
$$\text{SSE}(\beta) = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 = \sum_{i=1}^{n} (y_i - X_i \beta)^2$$

#### 3. 碗状图形的意义

**(1) 图形结构**
- **X轴**：截距项 $\beta_0$（当面积和距离为0时的房价）
- **Y轴**：面积系数 $\beta_1$（面积每增加1平方米，房价的变化量）
- **Z轴**：误差平方和 SSE（模型预测与实际观测值的总误差）
- **曲面**：SSE随 $\beta_0$ 和 $\beta_1$ 变化的函数关系
- **红色星号**：使SSE最小的参数点，即最小二乘估计 $\hat{\beta}$

**(2) 几何意义**
- 碗状曲面体现了**凸函数**的特性，这保证了存在唯一的全局最小值
- 曲面的最低点对应最优的模型参数，此时模型对数据的拟合效果最好
- 曲面越陡峭，说明参数变化对SSE的影响越大
- 曲面越平缓，说明参数变化对SSE的影响越小

**(3) 模型解释**
- 截距项 $\beta_0$ 表示理论上面积为0且距离市中心0公里的房价（实际中无物理意义，主要用于模型调整）
- 面积系数 $\beta_1$ 表示在距离不变时，面积每增加1平方米，房价平均增加的金额
- 距离系数 $\beta_2$（代码中固定）表示在面积不变时，距离每增加1公里，房价平均减少的金额

通过这个3D可视化，我们可以直观地理解最小二乘法的优化过程：寻找能使误差平方和最小的参数组合，从而得到最优的线性模型。