<!DOCTYPE html>

<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<title>Wawa Games</title>
		
		<script type="text/javascript" src="js/jsnes.min.js"></script>
		<script type="text/javascript" src="js/nes-embed.js"></script>
		<script>window.onload = function(){
			nes_load_url("nes-canvas", "roms/othello.nes");
			initVirtualController();
			initGameSelection();
		}</script>
	</head>
	<body>
		<div id="loading" class="loading">
			<div class="loading-spinner"></div>
			<div class="loading-text">Loading...</div>
		</div>
		
		<div class="controls-bar">
			<button id="game-select" class="control-btn game">üéÆ ÈÄâÊã©Ê∏∏Êàè</button>
			<button id="reset-btn" class="control-btn reset">ÈáçÁΩÆÊ∏∏Êàè</button>
			<button id="audio-toggle" class="control-btn audio">üîä Â£∞Èü≥</button>
		</div>
		
		<!-- Game Selection Modal -->
		<div id="game-modal" class="game-modal">
			<div class="modal-content">
				<div class="modal-header">
					<h2>ÈÄâÊã©Ê∏∏Êàè</h2>
					<button id="close-modal" class="close-btn">&times;</button>
				</div>
				<div class="modal-body">
					<div id="game-categories"></div>
					<div id="game-list"></div>
				</div>
			</div>
		</div>
		<button id="audio" style="display: none;">Click to enable audio</button>
		<div class="canvas-container">
			<canvas id="nes-canvas" width="256" height="240"/>
		</div>
		
		<div class="virtual-controller">
			<div class="controller-section left-section">
				<div class="dpad">
					<div class="dpad-row">
						<button class="dpad-btn up" data-button="up">‚ñ≤</button>
					</div>
					<div class="dpad-row">
						<button class="dpad-btn left" data-button="left">‚óÄ</button>
						<button class="dpad-btn right" data-button="right">‚ñ∂</button>
					</div>
					<div class="dpad-row">
						<button class="dpad-btn down" data-button="down">‚ñº</button>
					</div>
				</div>
			</div>
			
			<div class="controller-section right-section">
				<div class="action-buttons">
					<button class="action-btn select" data-button="select">SELECT</button>
					<button class="action-btn start" data-button="start">START</button>
				</div>
				<div class="ab-buttons">
					<button class="ab-btn b-btn" data-button="b">B</button>
					<button class="ab-btn a-btn" data-button="a">A</button>
				</div>
			</div>
		</div>
		
        <p>DPad: Arrow keys<br/>Start: Return, Select: Tab<br/>A Button: A, B Button: S</p>
	
		<style>
			.loading {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.9);
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				z-index: 1000;
				transition: opacity 0.5s ease;
			}
			
			.loading.hidden {
				opacity: 0;
				pointer-events: none;
			}
			
			.loading-spinner {
				width: 60px;
				height: 60px;
				border: 4px solid #333;
				border-top: 4px solid #4CAF50;
				border-radius: 50%;
				animation: spin 1s linear infinite;
			}
			
			@keyframes spin {
				0% { transform: rotate(0deg); }
				100% { transform: rotate(360deg); }
			}
			
			.loading-text {
				color: #fff;
				font-size: 18px;
				margin-top: 20px;
				font-family: Arial, sans-serif;
			}
			
			.controls-bar {
				display: flex;
				justify-content: center;
				gap: 15px;
				padding: 15px;
				background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
				margin-bottom: 15px;
			}
			
			.canvas-container {
				max-width: 700px;
				width: 100%;
				overflow: auto;
				background: #000;
				padding: 10px;
				border-radius: 8px;
				margin: 0 auto 15px;
			}
			
			#nes-canvas {
				width: 100%;
				height: auto;
				display: block;
			}
			
			.control-btn {
				padding: 10px 25px;
				border: none;
				border-radius: 8px;
				font-size: 14px;
				font-weight: bold;
				cursor: pointer;
				transition: all 0.2s ease;
				box-shadow: 0 4px 8px rgba(0,0,0,0.3);
			}
			
			.control-btn.reset {
				background: linear-gradient(145deg, #e74c3c, #c0392b);
				color: white;
			}
			
			.control-btn.audio {
				background: linear-gradient(145deg, #3498db, #2980b9);
				color: white;
			}
			
			.control-btn.game {
				background: linear-gradient(145deg, #9b59b6, #8e44ad);
				color: white;
			}
			
			/* Game Modal Styles */
			.game-modal {
				display: none;
				position: fixed;
				z-index: 2000;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(0, 0, 0, 0.8);
				justify-content: center;
				align-items: center;
			}
			
			.modal-content {
				background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
				border-radius: 15px;
				max-width: 800px;
				width: 90%;
				max-height: 80vh;
				display: flex;
				flex-direction: column;
				overflow: hidden;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
			}
			
			.modal-header {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding: 20px 25px;
				background: linear-gradient(145deg, #3a3a3a, #2a2a2a);
				border-bottom: 2px solid #4a4a4a;
			}
			
			.modal-header h2 {
				color: #fff;
				margin: 0;
				font-size: 24px;
				font-family: Arial, sans-serif;
			}
			
			.close-btn {
				background: none;
				border: none;
				color: #fff;
				font-size: 32px;
				cursor: pointer;
				padding: 0;
				line-height: 1;
				transition: color 0.2s ease;
			}
			
			.close-btn:hover {
				color: #e74c3c;
			}
			
			.modal-body {
				display: flex;
				flex: 1;
				overflow: hidden;
			}
			
			#game-categories {
				width: 200px;
				background: linear-gradient(180deg, #3a3a3a, #2a2a2a);
				padding: 20px;
				overflow-y: auto;
				border-right: 1px solid #4a4a4a;
			}
			
			.category-btn {
				display: block;
				width: 100%;
				padding: 12px 16px;
				margin-bottom: 8px;
				text-align: left;
				background: linear-gradient(145deg, #4a4a4a, #3a3a3a);
				border: none;
				border-radius: 8px;
				color: #ccc;
				font-size: 14px;
				font-weight: bold;
				cursor: pointer;
				transition: all 0.2s ease;
				box-shadow: 0 2px 4px rgba(0,0,0,0.2);
			}
			
			.category-btn:hover {
				background: linear-gradient(145deg, #5a5a5a, #4a4a4a);
				color: #fff;
				transform: translateX(5px);
			}
			
			.category-btn.active {
				background: linear-gradient(145deg, #9b59b6, #8e44ad);
				color: #fff;
				transform: translateX(5px);
			}
			
			#game-list {
				flex: 1;
				padding: 20px;
				overflow-y: auto;
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
				gap: 15px;
			}
			
			.game-item {
				transition: transform 0.2s ease;
			}
			
			.game-item:hover {
				transform: translateY(-5px);
			}
			
			.game-btn {
				width: 100%;
				padding: 18px 12px;
				background: linear-gradient(145deg, #4a4a4a, #3a3a3a);
				border: none;
				border-radius: 12px;
				color: #fff;
				font-size: 16px;
				font-weight: bold;
				cursor: pointer;
				transition: all 0.2s ease;
				box-shadow: 0 4px 8px rgba(0,0,0,0.3);
				white-space: normal;
				word-wrap: break-word;
				min-height: 80px;
				display: flex;
				align-items: center;
				justify-content: center;
				text-align: center;
			}
			
			.game-btn:hover {
				background: linear-gradient(145deg, #5a5a5a, #4a4a4a);
				box-shadow: 0 6px 12px rgba(0,0,0,0.4);
				transform: scale(1.05);
			}
			
			.game-btn:active {
				transform: scale(0.98);
			}
			
			.game-name {
				display: block;
				font-size: 14px;
				line-height: 1.4;
			}
			
			/* Scrollbar Styling */
			#game-categories::-webkit-scrollbar,
			#game-list::-webkit-scrollbar {
				width: 8px;
			}
			
			#game-categories::-webkit-scrollbar-track,
			#game-list::-webkit-scrollbar-track {
				background: #2a2a2a;
				border-radius: 4px;
			}
			
			#game-categories::-webkit-scrollbar-thumb,
			#game-list::-webkit-scrollbar-thumb {
				background: #5a5a5a;
				border-radius: 4px;
			}
			
			#game-categories::-webkit-scrollbar-thumb:hover,
			#game-list::-webkit-scrollbar-thumb:hover {
				background: #7a7a7a;
			}
			
			/* Responsive Modal */
			@media (max-width: 768px) {
				.modal-content {
					width: 95%;
					height: 90vh;
				}
				
				.modal-body {
					flex-direction: column;
				}
				
				#game-categories {
					width: 100%;
					height: auto;
					max-height: 200px;
					overflow-y: auto;
					border-right: none;
					border-bottom: 1px solid #4a4a4a;
				}
				
				#game-list {
					grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
					gap: 10px;
				}
				
				.game-btn {
					padding: 12px 8px;
					min-height: 60px;
					font-size: 13px;
				}
			}
			
			@media (max-width: 480px) {
				.modal-header {
					padding: 15px 20px;
				}
				
				.modal-header h2 {
					font-size: 20px;
				}
				
				#game-categories {
					padding: 15px;
				}
				
				#game-list {
					padding: 15px;
					grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
				}
				
				.game-btn {
					font-size: 12px;
					min-height: 50px;
				}
			}
			
			.control-btn:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 12px rgba(0,0,0,0.4);
			}
			
			.control-btn:active {
				transform: translateY(0);
			}
			
			.virtual-controller {
				display: flex;
				justify-content: space-between;
				max-width: 500px;
				margin: 20px auto;
				padding: 15px;
				background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
				border-radius: 15px;
				box-shadow: 0 8px 32px rgba(0,0,0,0.3);
			}
			
			.controller-section {
				padding: 10px;
			}
			
			.left-section {
				flex: 1;
			}
			
			.right-section {
				flex: 1;
				display: flex;
				flex-direction: column;
				align-items: flex-end;
			}
			
			.dpad {
				display: flex;
				flex-direction: column;
				align-items: center;
			}
			
			.dpad-row {
				display: flex;
				justify-content: center;
			}
			
			.dpad-btn {
				width: 60px;
				height: 60px;
				margin: 3px 30px;
				border: none;
				border-radius: 10px;
				background: linear-gradient(145deg, #4a4a4a, #3a3a3a);
				color: #888;
				font-size: 20px;
				font-weight: bold;
				cursor: pointer;
				transition: all 0.1s ease;
				box-shadow: 0 4px 8px rgba(0,0,0,0.3);
				-webkit-tap-highlight-color: transparent;
				touch-action: manipulation;
			}
			
			.dpad-btn:active,
			.dpad-btn.pressed {
				transform: scale(0.95);
				background: linear-gradient(145deg, #3a3a3a, #2a2a2a);
				box-shadow: 0 2px 4px rgba(0,0,0,0.3);
			}
			
			.action-buttons {
				display: flex;
				gap: 15px;
				margin-bottom: 15px;
			}
			
			.action-btn {
				padding: 12px 20px;
				border: none;
				border-radius: 8px;
				background: linear-gradient(145deg, #5a5a5a, #4a4a4a);
				color: #ccc;
				font-size: 12px;
				font-weight: bold;
				cursor: pointer;
				transition: all 0.1s ease;
				box-shadow: 0 4px 8px rgba(0,0,0,0.3);
				-webkit-tap-highlight-color: transparent;
				touch-action: manipulation;
			}
			
			.action-btn:active,
			.action-btn.pressed {
				transform: scale(0.95);
				background: linear-gradient(145deg, #4a4a4a, #3a3a3a);
			}
			
			.ab-buttons {
				display: flex;
				gap: 20px;
			}
			
			.ab-btn {
				width: 70px;
				height: 70px;
				border: none;
				border-radius: 50%;
				font-size: 24px;
				font-weight: bold;
				cursor: pointer;
				transition: all 0.1s ease;
				box-shadow: 0 4px 8px rgba(0,0,0,0.3);
				-webkit-tap-highlight-color: transparent;
				touch-action: manipulation;
			}
			
			.b-btn {
				background: linear-gradient(145deg, #c0392b, #a93226);
				color: white;
			}
			
			.a-btn {
				background: linear-gradient(145deg, #27ae60, #229954);
				color: white;
			}
			
			.ab-btn:active,
			.ab-btn.pressed {
				transform: scale(0.95);
				box-shadow: 0 2px 4px rgba(0,0,0,0.3);
			}
			
			@media (max-width: 600px) {
				.virtual-controller {
					max-width: 95%;
					padding: 10px;
				}
				
				.dpad-btn {
					width: 50px;
					height: 50px;
					font-size: 16px;
				}
				
				.ab-btn {
					width: 60px;
					height: 60px;
					font-size: 20px;
				}
				
				.action-btn {
					padding: 10px 15px;
					font-size: 10px;
				}
			}
			
			@media (max-width: 400px) {
				.dpad-btn {
					width: 45px;
					height: 45px;
					font-size: 14px;
				}
				
				.ab-btn {
					width: 55px;
					height: 55px;
					font-size: 18px;
				}
			}
		</style>
		
		<script>
			function initVirtualController(){
				var buttons = document.querySelectorAll('[data-button]');
				
				buttons.forEach(function(button){
					var buttonName = button.dataset.button;
					var buttonCode = getButtonCode(buttonName);
					
					button.addEventListener('touchstart', function(e){
						e.preventDefault();
						nes.buttonDown(1, buttonCode);
						button.classList.add('pressed');
					}, {passive: false});
					
					button.addEventListener('touchend', function(e){
						e.preventDefault();
						nes.buttonUp(1, buttonCode);
						button.classList.remove('pressed');
					}, {passive: false});
					
					button.addEventListener('mousedown', function(e){
						e.preventDefault();
						nes.buttonDown(1, buttonCode);
						button.classList.add('pressed');
					});
					
					button.addEventListener('mouseup', function(e){
						e.preventDefault();
						nes.buttonUp(1, buttonCode);
						button.classList.remove('pressed');
					});
					
					button.addEventListener('mouseleave', function(e){
						nes.buttonUp(1, buttonCode);
						button.classList.remove('pressed');
					});
					
					button.addEventListener('contextmenu', function(e){
						e.preventDefault();
					});
				});
				
				document.addEventListener('touchmove', function(e){
					if(e.target.closest('.virtual-controller')){
						e.preventDefault();
					}
				}, {passive: false});
			}
			
			function getButtonCode(buttonName){
				switch(buttonName){
					case 'up': return jsnes.Controller.BUTTON_UP;
					case 'down': return jsnes.Controller.BUTTON_DOWN;
					case 'left': return jsnes.Controller.BUTTON_LEFT;
					case 'right': return jsnes.Controller.BUTTON_RIGHT;
					case 'a': return jsnes.Controller.BUTTON_A;
					case 'b': return jsnes.Controller.BUTTON_B;
					case 'select': return jsnes.Controller.BUTTON_SELECT;
					case 'start': return jsnes.Controller.BUTTON_START;
					default: return -1;
				}
			}
			
			var audioEnabled = true;
			
			function hideLoading(){
				var loading = document.getElementById('loading');
				if(loading){
					loading.classList.add('hidden');
					setTimeout(() => {
						loading.style.display = 'none';
					}, 500);
				}
			}
			
			function showLoading(){
				var loading = document.getElementById('loading');
				if(loading){
					loading.style.display = 'flex';
					loading.classList.remove('hidden');
				}
			}
			
			function resetGame(){
				showLoading();
				nes_reset();
				hideLoading();
			}
			
			function toggleAudio(){
				audioEnabled = !audioEnabled;
				var audioToggle = document.getElementById('audio-toggle');
				if(audioToggle){
					if(audioEnabled){
						audioToggle.innerHTML = 'üîä Â£∞Èü≥';
					} else {
						audioToggle.innerHTML = 'üîá ÈùôÈü≥';
					}
				}
			}
			
			// Game categories and list data
			const gameData = {
				categories: [
					{ id: 'action', name: 'Âä®‰ΩúÁ±ª' },
					{ id: 'adventure', name: 'ÂÜíÈô©Á±ª' },
					{ id: 'strategy', name: 'Á≠ñÁï•Á±ª' },
					{ id: 'puzzle', name: 'ÁõäÊô∫Á±ª' },
					{ id: 'rpg', name: 'ËßíËâ≤ÊâÆÊºî' },
					{ id: 'sports', name: '‰ΩìËÇ≤Á±ª' },
					{ id: 'other', name: 'ÂÖ∂‰ªñ' }
				],
				games: [
					// Âä®‰ΩúÁ±ª
					{ id: 'mario1', name: 'Ë∂ÖÁ∫ßÁéõ‰∏Ω1', category: 'action', path: 'roms/Ë∂ÖÁ∫ßÁéõ‰∏Ω1.nes' },
					{ id: 'mario2', name: 'Ë∂ÖÁ∫ßÁéõ‰∏Ω2', category: 'action', path: 'roms/Ë∂ÖÁ∫ßÁéõ‰∏Ω2.nes' },
					{ id: 'mario1unlimited', name: 'Ë∂ÖÁ∫ßÈ©¨ÈáåÂ••ÂÖÑÂºü1ÂëΩÊï∞‰∏çÂáè', category: 'action', path: 'roms/Ë∂ÖÁ∫ßÈ©¨ÈáåÂ••ÂÖÑÂºü1ÂëΩÊï∞‰∏çÂáè.nes' },
					{ id: 'contra1', name: 'È≠ÇÊñóÁΩó1', category: 'action', path: 'roms/È≠ÇÊñóÁΩó1.nes' },
					{ id: 'contra2', name: 'È≠ÇÊñóÁΩó2', category: 'action', path: 'roms/È≠ÇÊñóÁΩó2.nes' },
					{ id: 'contra3', name: 'È≠ÇÊñóÁΩó3', category: 'action', path: 'roms/È≠ÇÊñóÁΩó3.nes' },
					{ id: 'greenberet', name: 'ÁªøËâ≤ÂÖµÂõ¢', category: 'action', path: 'roms/ÁªøËâ≤ÂÖµÂõ¢.nes' },
					{ id: 'megaman1', name: 'Ê¥õÂÖã‰∫∫', category: 'action', path: 'roms/Ê¥õÂÖã‰∫∫.nes' },
					{ id: 'megaman2', name: 'Ê¥õÂÖã‰∫∫2', category: 'action', path: 'roms/Ê¥õÂÖã‰∫∫2.nes' },
					{ id: 'megaman3', name: 'Ê¥õÂÖã‰∫∫3', category: 'action', path: 'roms/Ê¥õÂÖã‰∫∫3.nes' },
					{ id: 'megaman4', name: 'Ê¥õÂÖã‰∫∫4', category: 'action', path: 'roms/Ê¥õÂÖã‰∫∫4.nes' },
					{ id: 'megaman5', name: 'Ê¥õÂÖã‰∫∫5', category: 'action', path: 'roms/Ê¥õÂÖã‰∫∫5.nes' },
					{ id: 'megaman6', name: 'Ê¥õÂÖã‰∫∫6', category: 'action', path: 'roms/Ê¥õÂÖã‰∫∫6.nes' },
					{ id: 'gokurakucho', name: 'È≠îÁïåÊùë', category: 'action', path: 'roms/È≠îÁïåÊùë.nes' },
					{ id: 'ikari1', name: 'ÊÄí1', category: 'action', path: 'roms/ÊÄí1.nes' },
					{ id: 'ikari2', name: 'ÊÄí2', category: 'action', path: 'roms/ÊÄí2.nes' },
					{ id: 'ikari3', name: 'ÊÄí3', category: 'action', path: 'roms/ÊÄí3.nes' },
					{ id: 'double1', name: 'ÂèåÊà™Èæô1', category: 'action', path: 'roms/ÂèåÊà™Èæô1.nes' },
					{ id: 'double2', name: 'ÂèåÊà™Èæô2', category: 'action', path: 'roms/ÂèåÊà™Èæô2.nes' },
					{ id: 'double3', name: 'ÂèåÊà™Èæô3', category: 'action', path: 'roms/ÂèåÊà™Èæô3.nes' },
					{ id: 'double4', name: 'ÂèåÊà™Èæô4', category: 'action', path: 'roms/ÂèåÊà™Èæô4.nes' },
					{ id: '1944', name: '1944', category: 'action', path: 'roms/1944.nes' },
					{ id: 'galaga', name: 'ÂÖµËúÇ', category: 'action', path: 'roms/ÂÖµËúÇ.nes' },
					{ id: 'tank1990', name: 'Âù¶ÂÖãÂ§ßÊàò1990', category: 'action', path: 'roms/Tank 1990 (Asia) (En) (Pirate).nes' },
					{ id: '1990tank', name: '90Âù¶ÂÖã', category: 'action', path: 'roms/90Âù¶ÂÖã.nes' },
					
					// ÂÜíÈô©Á±ª
					{ id: 'castlevania1', name: 'ÊÅ∂È≠îÂüé', category: 'adventure', path: 'roms/ÊÅ∂È≠îÂüé.nes' },
					{ id: 'castlevania2', name: 'ÊÅ∂È≠îÂüé2', category: 'adventure', path: 'roms/ÊÅ∂È≠îÂüé2.nes' },
					{ id: 'castlevania3', name: 'ÊÅ∂È≠îÂüé3', category: 'adventure', path: 'roms/ÊÅ∂È≠îÂüé3.nes' },
					{ id: 'duckhunt1', name: 'ËçíÈáéÂ§ßÈïñÂÆ¢', category: 'adventure', path: 'roms/ËçíÈáéÂ§ßÈïñÂÆ¢.nes' },
					{ id: 'duckhunt2', name: 'ËçíÈáéÂ§ßÈïñÂÆ¢Êó†ÊïåÁâà', category: 'adventure', path: 'roms/ËçíÈáéÂ§ßÈïñÂÆ¢Êó†ÊïåÁâà.nes' },
					{ id: 'streetfighter', name: 'Ë°óÂ§¥Èú∏Áéã', category: 'adventure', path: 'roms/Ë°óÂ§¥Èú∏Áéã.nes' },
					{ id: 'finalfight', name: 'Âø´ÊâìÊóãÈ£é', category: 'adventure', path: 'roms/Âø´ÊâìÊóãÈ£é.nes' },
					{ id: 'hudson1', name: 'ÂÜíÈô©Â≤õ1', category: 'adventure', path: 'roms/ÂÜíÈô©Â≤õ1.nes' },
					{ id: 'hudson2', name: 'ÂÜíÈô©Â≤õ2', category: 'adventure', path: 'roms/ÂÜíÈô©Â≤õ2.nes' },
					{ id: 'hudson3', name: 'ÂÜíÈô©Â≤õ3', category: 'adventure', path: 'roms/ÂÜíÈô©Â≤õ3.nes' },
					{ id: 'hudson4', name: 'ÂÜíÈô©Â≤õ4', category: 'adventure', path: 'roms/ÂÜíÈô©Â≤õ4.nes' },
					{ id: 'sangokushi', name: '‰∏âÁõÆÁ´•Â≠ê', category: 'adventure', path: 'roms/‰∏âÁõÆÁ´•Â≠ê.nes' },
					{ id: 'captain11', name: 'Â§©‰Ωø‰πãÁøº2‰ª£', category: 'adventure', path: 'roms/Â§©‰Ωø‰πãÁøº2‰ª£.nes' },
					{ id: 'kirby', name: 'Êòü‰πãÂç°ÊØî', category: 'adventure', path: 'roms/Êòü‰πãÂç°ÊØî.nes' },
					{ id: 'snowbrothers', name: 'Èõ™‰∫∫ÂÖÑÂºü', category: 'adventure', path: 'roms/Èõ™‰∫∫ÂÖÑÂºü.nes' },
					{ id: 'rainbow', name: 'ÂΩ©ËôπÂ≤õ', category: 'adventure', path: 'roms/ÂΩ©ËôπÂ≤õ.nes' },
					{ id: 'wizard', name: 'ÁªøÈáé‰ªôË∏™', category: 'adventure', path: 'roms/ÁªøÈáé‰ªôË∏™.nes' },
					
					// Á≠ñÁï•Á±ª
					{ id: 'othello', name: 'ÈªëÁôΩÊ£ã', category: 'strategy', path: 'roms/othello.nes' },
					{ id: 'gowei', name: 'Âõ¥Ê£ãÂ§ßÊàò', category: 'strategy', path: 'roms/Âõ¥Ê£ãÂ§ßÊàòg.nes' },
					{ id: 'chess', name: '‰∏≠ÂõΩË±°Ê£ã', category: 'strategy', path: 'roms/‰∏≠ÂõΩË±°Ê£ã.nes' },
					{ id: 'gomoku', name: '‰∫îÂ≠êÊ£ã', category: 'strategy', path: 'roms/‰∫îÂ≠êÊ£ã.nes' },
					
					// ÁõäÊô∫Á±ª
					{ id: 'tetris', name: '‰øÑÁΩóÊñØÊñπÂùó', category: 'puzzle', path: 'roms/‰øÑÁΩóÊñØÊñπÂùó.nes' },
					{ id: 'drmario', name: 'È©¨ÈáåÂ••ÂåªÁîü', category: 'puzzle', path: 'roms/È©¨ÈáåÂ••ÂåªÁîü.nes' },
					{ id: 'breakout', name: 'ÊâìÁ†ñÂùó', category: 'puzzle', path: 'roms/ÊâìÁ†ñÂùó.nes' },
					{ id: 'bubble', name: 'Ê≥°Ê≥°Èæô', category: 'puzzle', path: 'roms/Ê≥°Ê≥°Èæô.nes' },
					{ id: 'plumber', name: 'Ê∞¥ÁÆ°Â∑•È©¨ÈáåÂ••', category: 'puzzle', path: 'roms/Ê∞¥ÁÆ°Â∑•È©¨ÈáåÂ••.nes' },
					{ id: 'lode', name: 'Ê∑òÈáëËÄÖ(J)', category: 'puzzle', path: 'roms/Ê∑òÈáëËÄÖ(J).nes' },
					
					// ËßíËâ≤ÊâÆÊºî
					{ id: 'pokemon', name: 'Âè£Ë¢ãÂ¶ñÊÄ™', category: 'rpg', path: 'roms/Âè£Ë¢ãÂ¶ñÊÄ™.nes' },
					{ id: 'tos1', name: 'ÂêûÈ£üÂ§©Âú∞1', category: 'rpg', path: 'roms/ÂêûÈ£üÂ§©Âú∞1.nes' },
					{ id: 'tos2', name: 'ÂêûÈ£üÂ§©Âú∞2', category: 'rpg', path: 'roms/ÂêûÈ£üÂ§©Âú∞2.nes' },
					{ id: 'finalfantasy', name: 'ÊúÄÁªàÂπªÊÉ≥(Èì∂Ê≤≥Êó∂‰ª£)', category: 'rpg', path: 'roms/ÊúÄÁªàÂπªÊÉ≥(Èì∂Ê≤≥Êó∂‰ª£).nes' },
					
					// ‰ΩìËÇ≤Á±ª
					{ id: 'f1', name: 'F1ËµõËΩ¶', category: 'sports', path: 'roms/F1ËµõËΩ¶.nes' },
					{ id: 'tennis', name: 'ÁΩëÁêÉ', category: 'sports', path: 'roms/ÁΩëÁêÉ.nes' },
					{ id: 'bike', name: 'Ë∂äÈáéÊë©Êâò', category: 'sports', path: 'roms/Ë∂äÈáéÊë©Êâò.nes' },
					{ id: 'basketball', name: 'ÁÉ≠Ë°ÄÁØÆÁêÉ', category: 'sports', path: 'roms/ÁÉ≠Ë°ÄÁØÆÁêÉ.nes' },
					{ id: 'soccer', name: 'ÁÉ≠Ë°ÄË∂≥ÁêÉ', category: 'sports', path: 'roms/ÁÉ≠Ë°ÄË∂≥ÁêÉ.nes' },
					{ id: 'school', name: 'ÁÉ≠Ë°ÄÈ´òÊ†°', category: 'sports', path: 'roms/ÁÉ≠Ë°ÄÈ´òÊ†°.nes' },
					
					// ÂÖ∂‰ªñ
					{ id: 'pacman', name: 'ÂêÉË±Ü', category: 'other', path: 'roms/ÂêÉË±Ü.nes' },
					{ id: 'circus', name: 'È©¨ÊàèÂõ¢', category: 'other', path: 'roms/È©¨ÊàèÂõ¢.nes' },
					{ id: 'rocket', name: 'ÁÅ´ÁÆ≠ËΩ¶', category: 'other', path: 'roms/ÁÅ´ÁÆ≠ËΩ¶.nes' },
					{ id: 'pigs', name: '‰∏âÂè™Â∞èÁå™', category: 'other', path: 'roms/‰∏âÂè™Â∞èÁå™.nes' },
					{ id: 'dog', name: 'È°ΩÁöÆÁãó(ÁæéÁâà)', category: 'other', path: 'roms/È°ΩÁöÆÁãó(ÁæéÁâà)(U).nes' },
					{ id: 'bomberman1', name: 'ÁÇ∏Âºπ‰∫∫', category: 'other', path: 'roms/ÁÇ∏Âºπ‰∫∫.nes' },
					{ id: 'bomberman2', name: 'ÁÇ∏Âºπ‰∫∫2', category: 'other', path: 'roms/ÁÇ∏Âºπ‰∫∫2.nes' }
				]
			};
			
			// Game selection functionality
			function initGameSelection(){
				const gameSelectBtn = document.getElementById('game-select');
				const gameModal = document.getElementById('game-modal');
				const closeModalBtn = document.getElementById('close-modal');
				const gameCategories = document.getElementById('game-categories');
				const gameList = document.getElementById('game-list');
				
				// Initialize categories
				function renderCategories(){
					gameCategories.innerHTML = '';
					gameData.categories.forEach(category => {
						const categoryBtn = document.createElement('button');
						categoryBtn.className = 'category-btn';
						categoryBtn.dataset.category = category.id;
						categoryBtn.textContent = category.name;
						categoryBtn.addEventListener('click', () => {
							renderGames(category.id);
							// Remove active class from all category buttons
							document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
							// Add active class to clicked button
							categoryBtn.classList.add('active');
						});
						gameCategories.appendChild(categoryBtn);
					});
					
					// Select first category by default
					if(gameData.categories.length > 0){
						renderGames(gameData.categories[0].id);
						if(gameCategories.firstChild){
							gameCategories.firstChild.classList.add('active');
						}
					}
				}
				
				// Render games by category
				function renderGames(categoryId){
					gameList.innerHTML = '';
					const filteredGames = gameData.games.filter(game => game.category === categoryId);
					
					filteredGames.forEach(game => {
						const gameItem = document.createElement('div');
						gameItem.className = 'game-item';
						gameItem.innerHTML = `
							<button class="game-btn" data-game-path="${game.path}">
								<span class="game-name">${game.name}</span>
							</button>
						`;
						gameList.appendChild(gameItem);
					});
					
					// Add click event listeners to game buttons
					document.querySelectorAll('.game-btn').forEach(btn => {
						btn.addEventListener('click', () => {
							const gamePath = btn.dataset.gamePath;
							loadGame(gamePath);
							gameModal.style.display = 'none';
						});
					});
				}
				
				// Load selected game
				function loadGame(gamePath){
					showLoading();
					nes_load_url('nes-canvas', gamePath);
					// Hide loading after a short delay
					setTimeout(() => {
						hideLoading();
					}, 500);
				}
				
				// Modal event listeners
				gameSelectBtn.addEventListener('click', () => {
					gameModal.style.display = 'flex';
					// Re-render in case data changed
					renderCategories();
				});
				
				closeModalBtn.addEventListener('click', () => {
					gameModal.style.display = 'none';
				});
				
				// Close modal when clicking outside
				window.addEventListener('click', (e) => {
					if(e.target === gameModal){
						gameModal.style.display = 'none';
					}
				});
				
				// Initialize
				renderCategories();
			}
			
			function initControls(){
				var resetBtn = document.getElementById('reset-btn');
				var audioToggle = document.getElementById('audio-toggle');
				
				if(resetBtn){
					resetBtn.addEventListener('click', resetGame);
				}
				
				if(audioToggle){
					audioToggle.addEventListener('click', toggleAudio);
				}
			}
			
			window.nes_on_load = function(){
				hideLoading();
			};
			
			initControls();
		</script>
	</body>
</html>