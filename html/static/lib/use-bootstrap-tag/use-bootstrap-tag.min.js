var UseBootstrapTag=function(){"use strict";const x=[];function P(t){for(const e of t.dependencies)e.delete(t);t.dependencies.clear()}function q(t,e){e.add(t),t.dependencies.add(e)}function L(t){const e=new Set;function r(){const u=x[x.length-1];return u&&q(u,e),t}function l(u){t=u;for(const o of[...e])o.execute()}return[r,l]}function k(t){const e={execute(){P(e),x.push(e),t(),x.pop()},dependencies:new Set};e.execute()}function O(t,e){return t.length===e.length&&t.every((r,l)=>r===e[l])}function M(t,e){t.value=e,t.dispatchEvent(new Event("change"))}function U(t,e){const r=t.lastIndexOf(e);r!==-1&&t.splice(r,1)}function g(t,e){const r=document.createElement(t);return Object.assign(r,e)}function S(t,e){return typeof t=="string"?t.split(e):Array.isArray(t)?t.flatMap(r=>typeof r=="string"?r.split(e):[]):[]}const N="use-bootstrap-tag",V=`${N}-target`;function C(t){const e=t,r=e.nextElementSibling;r&&r.classList.contains(N)&&r.remove();const l=g("div");e.insertAdjacentElement("afterend",l);const u=e.dataset,o={separator:u.ubTagSeparator||",",variant:u.ubTagVariant||"secondary",xPosition:u.ubTagXPosition||"right",transform:u.ubTagTransform||"input => input",isDuplicate:u.ubTagDuplicate!==void 0,max:+u.ubTagMax>0?+u.ubTagMax:void 0,noInputOnblur:u.ubTagNoInputOnblur!==void 0},m=()=>l.querySelectorAll("button"),$=n=>{n.classList.add("duplicate"),setTimeout(()=>{n.classList.remove("duplicate")},150)},j=()=>e.value,v=()=>j().split(o.separator).filter(n=>n!==""),A=n=>{const s=v(),a=S(n,o.separator);if(!o.max||s.length<o.max){const i=[];!o.isDuplicate&&s.forEach((c,d)=>a.includes(c)&&i.push(d));const p=[];a.forEach(c=>{s.includes(c)?o.isDuplicate&&p.push(c):p.push(c)}),s.push(...p),O(v(),s)||(M(e,s.join(o.separator)),p.forEach(c=>{const d=m()[s.lastIndexOf(c)],Q=d.offsetHeight;d.style.height=0,setTimeout(()=>d.style.height=`${Q}px`,0),setTimeout(()=>d.style.removeProperty("height"),150)})),o.isDuplicate||i.forEach(c=>$(m()[c]))}else a.length>0&&m().forEach($)},H=n=>{const s=v();S(n,o.separator).forEach(i=>U(s,i)),O(v(),s)||M(e,s.join(o.separator))},b=e.classList,B=e.disabled;e.tabIndex=-1,b.add(V);const[X,_]=L(e.value),[z,T]=L(!1),[f,y]=L(""),h=()=>X().split(o.separator).filter(n=>n.trim()!==""),G=()=>Function(`return ${o.transform}`)()(f().trim()),F=()=>h().length?"":e.placeholder;l.className=`${N} d-flex flex-wrap align-items-center gap-1 ${b.value}`.replace(V,""),k(()=>{z()?l.classList.add("focus"):l.classList.remove("focus")});const E=()=>{var n;return(n=l.querySelector("input"))==null?void 0:n.focus()},D=n=>{n>=0&&H(h()[n])},I=(n=!1)=>{const s=G();s===""&&y(""),(f().includes(o.separator)||n&&f()!=="")&&(A(s.split(o.separator).filter(a=>a.trim()!=="")),y(""))},w=g("button",{type:"button",className:`align-items-center gap-1 d-inline-flex py-0 border-0 btn btn-${o.variant}`,disabled:B});b.contains("form-control-sm")&&w.classList.add("btn-sm"),b.contains("form-control-lg")&&w.classList.add("btn-lg"),o.xPosition==="left"&&w.classList.add("flex-row-reverse");const J=g("span",{className:"d-inline-flex",role:"button",tabIndex:-1,innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>'}),K=n=>{m().forEach(s=>s.remove()),n.reverse().forEach((s,a)=>{const i=n.length-1-a,p=w.cloneNode();if(p.innerHTML=s,p.onfocus=()=>{p.classList.add("active"),T(!0)},p.onblur=()=>{p.classList.remove("active"),T(!1)},p.onkeydown=({key:c})=>{if(c==="Backspace"||c==="Delete"){D(i);const d=c==="Backspace"?i-1:h().length===i?-1:i;d===-1?E():m()[d].focus()}},!B){const c=J.cloneNode(!0);c.onclick=()=>{D(i),E()},p.append(c)}l.prepend(p)})};if(k(()=>{K(h())}),!B){const n=g("div",{className:"input-wrapper"}),s=g("span"),a=g("input",{type:"text"});a.onfocus=()=>{T(!0)},a.onblur=()=>{T(!1),o.noInputOnblur?y(""):I(!0)},a.onkeydown=i=>{f()===""&&i.key==="Backspace"&&D(h().length-1),f()!==""&&i.key==="Enter"&&(I(!0),i.preventDefault())},a.oninput=()=>{y(a.value),I()},k(()=>{s.innerHTML=f()||F()||"i",a.placeholder=F(),a.value=f()}),n.append(s,a),l.append(n)}return l.onclick=n=>{n.target.tagName!=="BUTTON"&&E()},e.addEventListener("change",()=>{_(e.value)}),e.addEventListener("focus",E),{getValue:j,getValues:v,addValue:A,removeValue:H}}return C}();
